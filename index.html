<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>和弦轮盘 - 移动端版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        // 防止下载图片的措施
        document.addEventListener('DOMContentLoaded', function() {
            // 禁用右键菜单（防止右键保存图片）
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // 防止图片拖拽下载
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.addEventListener('dragstart', function(e) {
                    e.preventDefault();
                    return false;
                });
                
                // 防止通过触摸长按保存图片（移动设备）
                img.addEventListener('touchstart', function(e) {
                    this.classList.add('prevent-long-press');
                    clearTimeout(this.longPressTimer);
                    
                    this.longPressTimer = setTimeout(() => {
                        e.preventDefault();
                        return false;
                    }, 500);
                });
                
                img.addEventListener('touchend', function() {
                    clearTimeout(this.longPressTimer);
                });
            });
            
            // 禁用选择文本和图片
            document.body.style.userSelect = 'none';
            document.body.style.webkitUserSelect = 'none';
        });

        // 暂时注释掉禁止本地运行的功能
        /*
        if (window.location.protocol === 'file:' || window.location.hostname === 'localhost') {
            document.write(`
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;">
                    <h1 style="color: #dc2626; font-size: 24px; margin-bottom: 20px;">禁止本地运行</h1>
                    <p style="color: #4b5563; text-align: center; max-width: 80%;">
                        该应用程序需要在服务器环境下运行，不支持本地直接打开。<br>
                        请将文件部署到web服务器后访问。
                    </p>
                </div>
            `);
            throw new Error('禁止本地运行');
        }
        */

        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1F2937',
                        light: '#F3F4F6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .wheel-shadow {
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            }
            .rotate-origin-center {
                transform-origin: center;
            }
            .transition-rotate {
                transition: transform 0.5s ease-out;
            }
            .wheel-image {
                width: 100%;
                height: 100%;
                object-fit: contain;
                pointer-events: none; /* 额外防止图片被点击或选中 */
            }
            .arrow-btn {
                width: 72px;
                height: 72px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            }
            .arrow-btn:active {
                transform: scale(0.95);
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            .toggle-btn {
                padding: 10px 20px;
                border-radius: 24px;
                font-weight: 500;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                font-size: 1rem;
                width: auto;
                white-space: nowrap;
            }
            .toggle-btn:active {
                transform: scale(0.98);
            }
            .ad-container {
                background: white;
                border-radius: 12px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }
            .arrow-icon {
                font-size: 2rem !important;
                display: block !important;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-50 min-h-screen font-sans p-4">
    <!-- 顶部广告位 -->
    <div class="ad-container mb-6 p-4 text-center">
        <p class="text-sm text-gray-500 mb-1">广告</p>
        <p class="font-medium text-dark">广告1：专业音乐器材选购，限时折扣进行中</p>
    </div>

    <div class="text-center mb-6">
        <h1 class="text-[clamp(1.5rem,6vw,2rem)] font-bold text-dark mb-2">和弦轮盘</h1>
        <p class="text-gray-600">旋转轮盘查看和弦</p>
    </div>

    <!-- 旋转控制按钮容器 - 位于轮盘上方 -->
    <div class="flex justify-center gap-10 mb-6">
        <!-- 左箭头按钮 -->
        <button id="rotateReverseBtn" class="arrow-btn bg-secondary hover:bg-secondary/90 text-white transition-all duration-300">
            <i class="fa fa fa-arrow-left arrow-icon"></i>
            <span class="sr-only">向左旋转</span>
        </button>

        <!-- 右箭头按钮 -->
        <button id="rotateBtn" class="arrow-btn bg-primary hover:bg-primary/90 text-white transition-all duration-300">
            <i class="fa fa-arrow-right arrow-icon"></i>
            <span class="sr-only">向右旋转</span>
        </button>
    </div>

    <!-- 轮盘容器 -->
    <div id="wheelContainer" class="relative w-[min(90vw,400px)] h-[min(90vw,400px)] mx-auto wheel-shadow rounded-full overflow-hidden mb-6">
        <!-- 下层圆盘 -->
        <div id="lowerWheel" class="absolute inset-0 rotate-origin-center transition-rotate">
            <img id="lowerImage" src="your-lower-wheel-image.png" alt="和弦轮盘下层" class="wheel-image">
        </div>

        <!-- 上层圆盘（带透明区域） -->
        <div id="upperWheel" class="absolute inset-0">
            <img id="upperImage" src="your-upper-wheel-image.png" alt="和弦轮盘上层（带透明区域）" class="wheel-image">
        </div>
    </div>

    <!-- 切换版本按钮 - 现在位于轮盘下方 -->
    <div class="flex justify-center mb-8">
        <button id="toggleSchemeBtn" class="toggle-btn bg-accent hover:bg-accent/90 text-white transition-all duration-300">
            <i class="fa fa-exchange mr-2"></i>切换版本
        </button>
    </div>

    <!-- 当前显示区域 -->
    <div id="currentChordContainer" class="mt-2 text-center text-gray-600 w-full max-w-md mx-auto mb-8 p-4 bg-white/80 rounded-xl">
        <p class="text-base">当前显示: <span id="currentChord" class="font-bold text-primary text-lg">C大调/A小调</span></p>
        <p class="mt-2 text-sm">当前版本: <span id="currentScheme" class="font-medium text-accent">新版</span></p>
    </div>

    <!-- 底部广告位 -->
    <div class="ad-container mt-auto p-4 text-center">
        <p class="text-sm text-gray-500 mb-1">广告</p>
        <p class="font-medium text-dark">广告2：音乐课程特惠，专业老师在线教学</p>
    </div>

    <script>
        // 确保图标加载失败时显示文本箭头
        document.addEventListener('DOMContentLoaded', function() {
            const testIcon = document.createElement('i');
            testIcon.className = 'fa fa-arrow-right';
            document.body.appendChild(testIcon);
            
            const isIconLoaded = testIcon.offsetWidth > 0;
            document.body.removeChild(testIcon);
            
            if (!isIconLoaded) {
                document.querySelector('#rotateReverseBtn i').innerHTML = '←';
                document.querySelector('#rotateBtn i').innerHTML = '→';
            }
        });

        // 获取元素
        const wheelContainer = document.getElementById('wheelContainer');
        const lowerWheel = document.getElementById('lowerWheel');
        const lowerImage = document.getElementById('lowerImage');
        const upperImage = document.getElementById('upperImage');
        const rotateBtn = document.getElementById('rotateBtn');
        const rotateReverseBtn = document.getElementById('rotateReverseBtn');
        const toggleSchemeBtn = document.getElementById('toggleSchemeBtn');
        const currentChord = document.getElementById('currentChord');
        const currentScheme = document.getElementById('currentScheme');
        
        // 旋转角度和和弦名称
        let rotationAngle = 0;
        let currentSchemeIndex = 1;
        
        // 和弦名称
        const chordSchemes = {
            1: [
                'C大调/A小调', 'F大调/D小调', 'Bb大调/G小调', 'Eb大调/C小调', 
                'Ab大调/F小调', 'C# or Db大调/A# or Bb小调', 'F# or Gb大调/D# or Eb小调', 'B or Cb大调/G# or Ab小调', 
                'E大调/C#小调', 'A大调/F#小调', 'D大调/B小调', 'G大调/E小调'
            ],
            2: [
                'C大调/A小调', 'F大调/D小调', 'Bb大调/G小调', 'Eb大调/C小调', 
                'Ab大调/F小调', 'C# or Db大调/A# or Bb小调', 'F# or Gb大调/D# or Eb小调', 'B or Cb大调/G# or Ab小调', 
                'E大调/C#小调', 'A大调/F#小调', 'D大调/B小调', 'G大调/E小调'
            ]
        };
        
        let currentChordIndex = 0;
        
        // 旋转方向：左箭头逆时针，右箭头顺时针
        function rotateClockwise() {
            rotationAngle += 30;
            lowerWheel.style.transform = `rotate(${rotationAngle}deg)`;
            
            currentChordIndex = (currentChordIndex + 1) % chordSchemes[currentSchemeIndex].length;
            currentChord.textContent = chordSchemes[currentSchemeIndex][currentChordIndex];
        }
        
        function rotateCounterClockwise() {
            rotationAngle -= 30;
            lowerWheel.style.transform = `rotate(${rotationAngle}deg)`;
            
            currentChordIndex = (currentChordIndex - 1 + chordSchemes[currentSchemeIndex].length) % chordSchemes[currentSchemeIndex].length;
            currentChord.textContent = chordSchemes[currentSchemeIndex][currentChordIndex];
        }
        
        function toggleScheme() {
            if (currentSchemeIndex === 1) {
                lowerImage.src = "your-lower-wheel-image2.png";
                upperImage.src = "your-upper-wheel-image2.png";
                currentSchemeIndex = 2;
                currentScheme.textContent = "旧版";
            } else {
                lowerImage.src = "your-lower-wheel-image.png";
                upperImage.src = "your-upper-wheel-image.png";
                currentSchemeIndex = 1;
                currentScheme.textContent = "新版";
            }
            currentChord.textContent = chordSchemes[currentSchemeIndex][currentChordIndex];
        }
        
        // 事件监听
        rotateBtn.addEventListener('click', rotateClockwise);
        rotateReverseBtn.addEventListener('click', rotateCounterClockwise);
        toggleSchemeBtn.addEventListener('click', toggleScheme);
        
        rotateBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rotateClockwise();
        });
        
        rotateReverseBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rotateCounterClockwise();
        });
        
        toggleSchemeBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            toggleScheme();
        });
    </script>
</body>
</html>
    